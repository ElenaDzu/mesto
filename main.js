(()=>{"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=function(){function r(t,o,i,a,u,s){var l=this,c=arguments.length>6&&void 0!==arguments[6]&&arguments[6];e(this,r),n(this,"_setEventListeners",(function(){l._cardLikebutton.addEventListener("click",l._handleLikeElement),l._cardLikebutton.addEventListener("click",l._handleCardLike.bind(l)),l._cardRemovebutton.addEventListener("click",l._handleRemoveElement),l._elementImage.addEventListener("click",l._handleCardClick)})),n(this,"_handleLikeElement",(function(){l._cardLikebutton.classList.toggle("element__icon_active")})),n(this,"_handleRemoveElement",(function(){l._handleCardRemove()})),this._title=t.name,this._image=t.link,this._selector=o,this._handleCardClick=i,this._handleCardRemove=a,this._handleCardLike=u,this._ownerId=t.owner._id,this._myCard=s,this.id=t._id,this._likes=t.likes,this._mylike=c}var o,i;return o=r,(i=[{key:"haveMyLike",value:function(){return this._mylike}},{key:"setLike",value:function(e){this._cardLikebutton.classList.add("element__icon_active"),this._likes=e,this._likesElement.innerText=this._likes.length,this._mylike=!0}},{key:"unsetLike",value:function(){this._cardLikebutton.classList.remove("element__icon_active"),this._likesElement.innerText=parseInt(this._likesElement.innerText)-1,this._mylike=!1}},{key:"remove",value:function(){this._itemElement.remove()}},{key:"_getTemplate",value:function(){return document.querySelector(this._selector).content.cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(this._selector),this._itemElement=this._element.querySelector(".element"),this._elementImage=this._element.querySelector(".element__image"),this._elementImage.src=this._image,this._elementImage.alt=this._title,this._element.querySelector(".element__title").textContent=this._title,this._cardRemovebutton=this._element.querySelector(".element__trash"),this._cardLikebutton=this._element.querySelector(".element__icon"),this._likesElement=this._element.querySelector(".element__counter"),this._mylike&&this._cardLikebutton.classList.add("element__icon_active"),this._likesElement.innerText=this._likes.length,this._setEventListeners(),this._myCard&&this._cardRemovebutton.classList.add("element__trash_visible"),this._element}}])&&t(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),r}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r,o,i=this,a=t.items,u=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=function(e){i._selector.prepend(e)},(r="addItem")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._items=a,this._renderer=u,this._selector=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"close",(function(){n._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",n._handleEscClose)})),u(this,"_handleEscClose",(function(e){"Escape"===e.key&&n.close("popup_opened")})),this._popup=document.querySelector(t),this._popupCloseButton=this._popup.querySelector(".popup__close-btn"),this._popupCloseOverlay=this._popup}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this;this._popupCloseButton.addEventListener("click",this.close),this._popupCloseOverlay.addEventListener("mousedown",(function(t){t.target.classList.contains("popup")&&e.close(e._popup)}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=p(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function p(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function d(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return d(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._imageBig=t._popup.querySelector(".popup__image-big"),t._imageName=t._popup.querySelector(".popup__image-name"),t}return t=a,(n=[{key:"open",value:function(e){this._imageBig.src=e.target.src,this._imageBig.alt=e.target.src,this._imageName.textContent=e.target.alt,f(y(a.prototype),"open",this).call(this)}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=g(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function S(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(r);if(o){var n=E(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return S(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._form=n._popup.querySelector("form"),n._handlerSubmitEvent=t,n.setEventListeners(),n}return t=a,(n=[{key:"setSubmitFunction",value:function(e){this._handlerSubmitEvent=e}},{key:"setEventListeners",value:function(){b(E(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._onSubmit.bind(this))}},{key:"_onSubmit",value:function(e){e.preventDefault(),this._handlerSubmitEvent.call(e.target),this.close()}},{key:"close",value:function(){b(E(a.prototype),"close",this).call(this),this._form.reset()}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formInput=t.formInput,this._buttonElement=t.buttonElement,this._saveBtnInactive=t.saveBtnInactive,this._textTypeError=t.textTypeError,this._formElement=n,this._inputList=null,this._elementSubmit=null}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e,t){var n=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._textTypeError),n.textContent=t}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._textTypeError),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):(this._showInputError(e,e.validationMessage),console.log(e.validationMessage))}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"toggleButtonStateReopen",value:function(){this._elementSubmit.classList.add(this._saveBtnInactive),this._elementSubmit.setAttribute("disabled","disabled")}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.toggleButtonStateReopen():(this._elementSubmit.classList.remove(this._saveBtnInactive),this._elementSubmit.removeAttribute("disabled"))}},{key:"_getInputElements",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"_setEventListeners",value:function(){this._inputList=Array.from(this._formElement.querySelectorAll(this._formInput)),this._elementSubmit=this._formElement.querySelector(this._buttonElement),this._toggleButtonState(),this._getInputElements()}},{key:"_addSubmitListener",value:function(){this._formElement.addEventListener("submit",(function(e){e.preventDefault()}))}},{key:"enableValidation",value:function(){this._addSubmitListener(),this._setEventListeners()}}])&&O(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=R(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},I.apply(this,arguments)}function R(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function T(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return T(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._form=n._popup.querySelector("form"),n._handlerSubmitEvent=t,n._submitButton=n._form.querySelector(".popup__save-btn"),n}return t=a,n=[{key:"setEventListeners",value:function(){I(q(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._onSubmit.bind(this))}},{key:"_onSubmit",value:function(e){e.preventDefault(),this._handlerSubmitEvent.call(e.target,this._getInputValues())}},{key:"close",value:function(){I(q(a.prototype),"close",this).call(this),this._form.reset()}},{key:"_getInputValues",value:function(){var e=this._form.querySelectorAll(".popup__text"),t={};return e.forEach((function(e){t[e.id]=e.value,e.value=""})),t}},{key:"setDefaultValues",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getInputValues();for(var n in e)if(Object.keys(t).includes(n)){var r=this._form.querySelector("#"+n);r.value=e[n]}}},{key:"loaderStart",value:function(){this._submitButton.innerText="Сохранение..."}},{key:"loaderStop",value:function(){this._submitButton.innerText="Сохранить"}}],n&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(t){var n=t.nameSelector,r=t.dataSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameSelector=n,this._dataSelector=r,this._avatarSelector=o}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{title:this._nameSelector.innerText,subtitle:this._dataSelector.innerText,avatar:this._avatarSelector.src}}},{key:"setAvatar",value:function(e){this._avatarSelector.style.backgroundImage="url('".concat(e,"')")}},{key:"setUserInfo",value:function(e,t){this._nameSelector.innerText=e,this._dataSelector.innerText=t}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),A(this,"baseUrl",""),A(this,"headers",null),A(this,"token","16d5d399-f287-4ea5-b24b-9feae8ea6a1a"),this.baseUrl=t.baseUrl,this.headers=t.headers,this.headers.authorization=this.token}var t,n;return t=e,(n=[{key:"_getResult",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getInitialCards",value:function(){return fetch(this.baseUrl+"/cards",{headers:this.headers}).then(this._getResult)}},{key:"getUserInfo",value:function(){return fetch(this.baseUrl+"/users/me",{headers:this.headers}).then(this._getResult)}},{key:"setUserInfo",value:function(e,t){return fetch(this.baseUrl+"/users/me",{method:"PATCH",headers:this.headers,body:JSON.stringify({name:e,about:t})}).then(this._getResult)}},{key:"postCard",value:function(e,t){return fetch(this.baseUrl+"/cards",{method:"POST",headers:this.headers,body:JSON.stringify({name:e,link:t})}).then(this._getResult)}},{key:"deleteCard",value:function(e){var t="/cards/".concat(e);return fetch(this.baseUrl+t,{method:"DELETE",headers:this.headers}).then(this._getResult)}},{key:"likeCard",value:function(e){var t="/cards/".concat(e,"/likes");return fetch(this.baseUrl+t,{method:"PUT",headers:this.headers}).then(this._getResult)}},{key:"UnlikeCard",value:function(e){var t="/cards/".concat(e,"/likes");return fetch(this.baseUrl+t,{method:"DELETE",headers:this.headers}).then(this._getResult)}},{key:"setAvatar",value:function(e){return fetch(this.baseUrl+"/users/me/avatar",{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:e})}).then(this._getResult)}}])&&D(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),N=document.querySelector(".profile__edit-btn"),M=document.querySelector(".profile__add-btn"),J=document.querySelector(".profile__title"),F=document.querySelector(".profile__subtitle"),H=document.querySelector(".profile__avatar"),z=new U({nameSelector:J,dataSelector:F,avatarSelector:H}),G=new w(".popup_confirm-removal",null),K=new V({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-43",headers:{"Content-Type":"application/json"}}),Q="",W=new i({items:[],renderer:function(e){W.addItem(ne(e))}});K.getUserInfo().then((function(e){z.setUserInfo(e.name,e.about),z.setAvatar(e.avatar),document.querySelector(".profile__id").innerText=e._id,Q=e._id,K.getInitialCards().then((function(e){(W=new i({items:e,renderer:function(e){W.addItem(ne(e))}},".elements-list")).renderItems()}))})).catch((function(e){console.log(e)}));var X={formInput:".popup__text",buttonElement:".popup__save-btn",saveBtnInactive:"popup__save-btn_inactive",textTypeError:"popup__text_type_error",inputErrorActive:"popup__input-error_active"},Y=null;new L(X,document.querySelector(".popup_edit").querySelector(".popup__container")).enableValidation(),(Y=new L(X,document.querySelector(".popup_add-newcard").querySelector(".popup__container"))).enableValidation();var Z=new x(".popup_edit",(function(e){Z.loaderStart(),K.setUserInfo(e["text-input"],e["job-input"]).then((function(e){Z.loaderStop(),z.setUserInfo(e.name,e.about),Z.close()})).catch((function(e){console.log(e)}))})),$=new x(".popup_update-avatar",(function(e){$.loaderStart(),K.setAvatar(e["link-inp"]).then((function(e){$.loaderStop(),$.close(),H.style.backgroundImage="url('".concat(e.avatar,"')")})).catch((function(e){console.log(e)}))})),ee=new x(".popup_add-newcard",(function(e){K.postCard(e["place-input"],e["link-input"]).then((function(e){console.log(e),W.addItem(ne(e))})).catch((function(e){console.log(e)})),ee.close(),Y.toggleButtonStateReopen()})),te=new _(".popup_image"),ne=function(e){var t=!0;e.owner&&(t=e.owner._id===Q);var n=!1;return e.likes.filter((function(e){return e._id==Q})).length>0&&(n=!0),new r(e,".template",te.open.bind(te),(function(){var t=this;G.open(),G.setSubmitFunction((function(){K.deleteCard(e._id).then((function(e){t.remove()})).catch((function(e){console.log(e)}))}))}),(function(){var e=this;this.haveMyLike()?K.UnlikeCard(this.id).then((function(t){e.unsetLike()})).catch((function(e){console.log(e)})):K.likeCard(this.id).then((function(t){e.setLike(t.likes)})).catch((function(e){console.log(e)}))}),t,n).generateCard()};N.addEventListener("click",(function(){var e=z.getUserInfo(),t=e.title,n=e.subtitle;Z.setDefaultValues({"text-input":t,"job-input":n}),Z.open()})),M.addEventListener("click",(function(){ee.open()})),H.addEventListener("click",(function(){$.open()})),Z.setEventListeners(),ee.setEventListeners(),te.setEventListeners(),$.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUkwRnZMLEVBQVFDLEdBQy9GNE0sZ0JBSXZCMUMsRUFBZ0JoSyxpQkFBaUIsU0FBUyxXQUN4QyxNQUEwQnFLLEVBQVNPLGNBQTVCdkMsRUFBUCxFQUFPQSxNQUFPQyxFQUFkLEVBQWNBLFNBQ2RtRCxFQUFpQmtCLGlCQUFpQixDQUFDLGFBQWN0RSxFQUFPLFlBQWFDLElBQ3JFbUQsRUFBaUJTLFVBR25CakMsRUFBaUJqSyxpQkFBaUIsU0FBUyxXQUN6QzZMLEdBQWFLLFVBR2Y5QixFQUFjcEssaUJBQWlCLFNBQVMsV0FDdEM0TCxFQUFrQk0sVUFHcEJULEVBQWlCbEgsb0JBQ2pCc0gsR0FBYXRILG9CQUNid0gsR0FBV3hILG9CQUNYcUgsRUFBa0JySCxxQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgICBjb25zdHJ1Y3RvcihjYXJkLCBzZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVDYXJkUmVtb3ZlLCBoYW5kbGVDYXJkTGlrZSwgbXlDYXJkLCBteUxpa2UgPSBmYWxzZSkge1xuICAgICAgICB0aGlzLl90aXRsZSA9IGNhcmQubmFtZTtcbiAgICAgICAgdGhpcy5faW1hZ2UgPSBjYXJkLmxpbms7XG4gICAgICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZFJlbW92ZSA9IGhhbmRsZUNhcmRSZW1vdmU7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlID0gaGFuZGxlQ2FyZExpa2U7XG4gICAgICAgIHRoaXMuX293bmVySWQgPSBjYXJkLm93bmVyLl9pZDtcbiAgICAgICAgdGhpcy5fbXlDYXJkID0gbXlDYXJkO1xuICAgICAgICB0aGlzLmlkID0gY2FyZC5faWQ7XG4gICAgICAgIHRoaXMuX2xpa2VzID0gY2FyZC5saWtlcztcbiAgICAgICAgdGhpcy5fbXlsaWtlID0gbXlMaWtlO1xuICAgIH07XG5cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NhcmRMaWtlYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlTGlrZUVsZW1lbnQpO1xuICAgICAgICB0aGlzLl9jYXJkTGlrZWJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNhcmRMaWtlLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLl9jYXJkUmVtb3ZlYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlUmVtb3ZlRWxlbWVudCk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNhcmRDbGljayk7XG4gICAgfTtcblxuICAgIF9oYW5kbGVMaWtlRWxlbWVudCA9ICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2FyZExpa2VidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9faWNvbl9hY3RpdmUnKTtcbiAgICB9O1xuXG4gICAgX2hhbmRsZVJlbW92ZUVsZW1lbnQgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRSZW1vdmUoKTtcbiAgICB9O1xuXG4gICAgaGF2ZU15TGlrZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX215bGlrZTtcbiAgICB9XG5cbiAgICBzZXRMaWtlKGxpa2VzKSB7XG4gICAgICAgIHRoaXMuX2NhcmRMaWtlYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX2ljb25fYWN0aXZlJyk7XG4gICAgICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XG4gICAgICAgIHRoaXMuX2xpa2VzRWxlbWVudC5pbm5lclRleHQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuX215bGlrZSA9IHRydWU7XG4gICAgfVxuXG4gICAgdW5zZXRMaWtlKCkge1xuICAgICAgICB0aGlzLl9jYXJkTGlrZWJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdlbGVtZW50X19pY29uX2FjdGl2ZScpO1xuICAgICAgICB0aGlzLl9saWtlc0VsZW1lbnQuaW5uZXJUZXh0ID0gcGFyc2VJbnQodGhpcy5fbGlrZXNFbGVtZW50LmlubmVyVGV4dCkgLSAxO1xuICAgICAgICB0aGlzLl9teWxpa2UgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZW1vdmUoKSB7XG4gICAgICAgIHRoaXMuX2l0ZW1FbGVtZW50LnJlbW92ZSgpO1xuICAgIH1cblxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9yKVxuICAgICAgICAgIC5jb250ZW50XG4gICAgICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICAgICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcbiAgICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSh0aGlzLl9zZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2l0ZW1FbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpO1xuICAgICAgICB0aGlzLl9lbGVtZW50SW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pbWFnZScpO1xuICAgICAgICB0aGlzLl9lbGVtZW50SW1hZ2Uuc3JjID0gdGhpcy5faW1hZ2U7XG4gICAgICAgIHRoaXMuX2VsZW1lbnRJbWFnZS5hbHQgPSB0aGlzLl90aXRsZTtcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX3RpdGxlO1xuICAgICAgICB0aGlzLl9jYXJkUmVtb3ZlYnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdHJhc2gnKTtcbiAgICAgICAgdGhpcy5fY2FyZExpa2VidXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19pY29uJyk7XG4gICAgICAgIHRoaXMuX2xpa2VzRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2NvdW50ZXInKTtcbiAgICAgICAgaWYgKHRoaXMuX215bGlrZSkge1xuICAgICAgICAgICAgdGhpcy5fY2FyZExpa2VidXR0b24uY2xhc3NMaXN0LmFkZCgnZWxlbWVudF9faWNvbl9hY3RpdmUnKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5fbGlrZXNFbGVtZW50LmlubmVyVGV4dCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICAgICAgaWYgICh0aGlzLl9teUNhcmQpIHsgXG4gICAgICAgICAgICB0aGlzLl9jYXJkUmVtb3ZlYnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX3RyYXNoX3Zpc2libGUnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgICB9O1xufTsiLCJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHtpdGVtcywgcmVuZGVyZXJ9LCBzZWxlY3Rvcikge1xuICAgICAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xuICAgICAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLl9zZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgIH07XG5cbiAgICAgICBhZGRJdGVtID0gKGVsZW1lbnQpID0+IHtcbiAgICAgICAgdGhpcy5fc2VsZWN0b3IucHJlcGVuZChlbGVtZW50KTtcbiAgICB9O1xuXG4gICAgcmVuZGVySXRlbXMoKSB7XG4gICAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pOyBcbiAgICAgICAgfSk7ICAgICAgXG4gICAgfVxufTtcbiIsIlxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwQ2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ0bicpO1xuICAgIHRoaXMuX3BvcHVwQ2xvc2VPdmVybGF5ID0gdGhpcy5fcG9wdXA7XG59O1xuIFxub3BlbigpIHtcbiAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG59XG5cbmNsb3NlID0gKCkgPT4ge1xuICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbn1cblxuX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICB0aGlzLmNsb3NlKCdwb3B1cF9vcGVuZWQnKTtcbiAgfTtcbn07XG5cbnNldEV2ZW50TGlzdGVuZXJzKCkge1xuICB0aGlzLl9wb3B1cENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZSk7XG4gIHRoaXMuX3BvcHVwQ2xvc2VPdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSkge1xuICAgICAgICB0aGlzLmNsb3NlKHRoaXMuX3BvcHVwKTsgXG4gICAgfVxuICB9KTtcbn07XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faW1hZ2VCaWcgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlLWJpZycpO1xuICAgIHRoaXMuX2ltYWdlTmFtZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UtbmFtZScpO1xuICB9O1xuXG4gIG9wZW4oZXZlbnQpIHtcbiAgICB0aGlzLl9pbWFnZUJpZy5zcmMgPSBldmVudC50YXJnZXQuc3JjO1xuICAgIHRoaXMuX2ltYWdlQmlnLmFsdCA9IGV2ZW50LnRhcmdldC5zcmM7XG4gICAgdGhpcy5faW1hZ2VOYW1lLnRleHRDb250ZW50ID0gZXZlbnQudGFyZ2V0LmFsdDtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhTdWJtaXQgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yLCBoYW5kbGVyU3VibWl0RXZlbnQpIHtcbiAgICBzdXBlcihzZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKVxuICAgIHRoaXMuX2hhbmRsZXJTdWJtaXRFdmVudCA9IGhhbmRsZXJTdWJtaXRFdmVudDtcbiAgICB0aGlzLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH07XG5cbiAgc2V0U3VibWl0RnVuY3Rpb24oZikge1xuICAgIHRoaXMuX2hhbmRsZXJTdWJtaXRFdmVudCA9IGY7XG4gIH1cbiAgXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKTtcbiAgfTtcbiAgX29uU3VibWl0KGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB0aGlzLl9oYW5kbGVyU3VibWl0RXZlbnQuY2FsbChldmVudC50YXJnZXQpO1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgfTtcbiAgXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9O1xuICBcbiAgfSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICAgIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fZm9ybUlucHV0ID0gY29uZmlnLmZvcm1JbnB1dDtcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IGNvbmZpZy5idXR0b25FbGVtZW50O1xuICAgICAgICB0aGlzLl9zYXZlQnRuSW5hY3RpdmUgPSBjb25maWcuc2F2ZUJ0bkluYWN0aXZlO1xuICAgICAgICB0aGlzLl90ZXh0VHlwZUVycm9yID0gY29uZmlnLnRleHRUeXBlRXJyb3I7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IG51bGw7XG4gICAgICAgIHRoaXMuX2VsZW1lbnRTdWJtaXQgPSBudWxsO1xuICAgIH1cblxuICAgIF9zaG93SW5wdXRFcnJvciAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpIHtcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl90ZXh0VHlwZUVycm9yKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgICAgfTtcblxuICAgIF9oaWRlSW5wdXRFcnJvciAoaW5wdXRFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdGV4dFR5cGVFcnJvcik7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgfTtcblxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkgKGlucHV0RWxlbWVudCkge1xuICAgICAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBfaGFzSW52YWxpZElucHV0ICgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICAgICAgfSlcbiAgICB9O1xuICAgXG4gICAgdG9nZ2xlQnV0dG9uU3RhdGVSZW9wZW4gKCkge1xuICAgICAgdGhpcy5fZWxlbWVudFN1Ym1pdC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NhdmVCdG5JbmFjdGl2ZSk7XG4gICAgICB0aGlzLl9lbGVtZW50U3VibWl0LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCAnZGlzYWJsZWQnKTtcbiAgICB9XG5cbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUgKCkge1xuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlUmVvcGVuKClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2VsZW1lbnRTdWJtaXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9zYXZlQnRuSW5hY3RpdmUpO1xuICAgICAgICAgICAgdGhpcy5fZWxlbWVudFN1Ym1pdC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICBfZ2V0SW5wdXRFbGVtZW50cyAoKSB7XG4gICAgICAgIGNvbnN0IHRoYXQgPSB0aGlzXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aGF0Ll9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgICAgICB0aGF0Ll90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIF9zZXRFdmVudExpc3RlbmVycyAoKSB7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9mb3JtSW5wdXQpKTtcbiAgICAgICAgdGhpcy5fZWxlbWVudFN1Ym1pdCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fYnV0dG9uRWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgIHRoaXMuX2dldElucHV0RWxlbWVudHMoKTtcbiAgICB9O1xuXG4gICAgIF9hZGRTdWJtaXRMaXN0ZW5lciAoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAgICAgfSlcbiAgICAgfVxuXG4gICAgZW5hYmxlVmFsaWRhdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX2FkZFN1Ym1pdExpc3RlbmVyKCk7XG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfTtcblxufTsiLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cHtcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3IsIGhhbmRsZXJTdWJtaXRFdmVudCkge1xuICBzdXBlcihzZWxlY3Rvcik7XG4gIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCdmb3JtJylcbiAgdGhpcy5faGFuZGxlclN1Ym1pdEV2ZW50ID0gaGFuZGxlclN1Ym1pdEV2ZW50O1xuICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZS1idG4nKTtcbn07XG5cbnNldEV2ZW50TGlzdGVuZXJzKCkge1xuICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuX29uU3VibWl0LmJpbmQodGhpcykpO1xufTtcbl9vblN1Ym1pdChldmVudCkge1xuICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICB0aGlzLl9oYW5kbGVyU3VibWl0RXZlbnQuY2FsbChldmVudC50YXJnZXQsIHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xufTtcblxuY2xvc2UoKSB7XG4gIHN1cGVyLmNsb3NlKCk7XG4gIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbn07XG5cbl9nZXRJbnB1dFZhbHVlcygpIHtcbiBjb25zdCBpbnB1dHMgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9fdGV4dCcpO1xuIGxldCBpbnB1dFZhbHVlcyA9IHt9O1xuIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICBpbnB1dFZhbHVlc1tpbnB1dC5pZF0gPSBpbnB1dC52YWx1ZTtcbiAgaW5wdXQudmFsdWUgPSBcIlwiO1xuIH1cbiApXG4gcmV0dXJuIGlucHV0VmFsdWVzO1xufVxuXG5zZXREZWZhdWx0VmFsdWVzKHZhbHVlcyA9IHt9KSB7XG4gIGNvbnN0IGlucHV0cyA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG4gIGZvciAobGV0IGlucHV0X2lkIGluIHZhbHVlcykge1xuICAgIGlmIChPYmplY3Qua2V5cyhpbnB1dHMpLmluY2x1ZGVzKGlucHV0X2lkKSkge1xuICAgICAgY29uc3QgaW5wdXQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJyMnICsgaW5wdXRfaWQpO1xuICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZXNbaW5wdXRfaWRdXG4gICAgfVxuICAgIFxuICB9XG59XG5cbmxvYWRlclN0YXJ0KCkge1xuICB0aGlzLl9zdWJtaXRCdXR0b24uaW5uZXJUZXh0ID0gJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJztcbn1cblxubG9hZGVyU3RvcCgpIHtcbiAgdGhpcy5fc3VibWl0QnV0dG9uLmlubmVyVGV4dCA9ICfQodC+0YXRgNCw0L3QuNGC0YwnO1xufVxuXG59XG4iLCJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3Ioe25hbWVTZWxlY3RvciwgZGF0YVNlbGVjdG9yLCBhdmF0YXJTZWxlY3Rvcn0pIHtcbnRoaXMuX25hbWVTZWxlY3RvciA9IG5hbWVTZWxlY3RvcjtcbnRoaXMuX2RhdGFTZWxlY3RvciAgPSBkYXRhU2VsZWN0b3I7XG50aGlzLl9hdmF0YXJTZWxlY3RvciA9IGF2YXRhclNlbGVjdG9yO1xufTtcbiBcbmdldFVzZXJJbmZvKCkge1xuICByZXR1cm4ge3RpdGxlOiB0aGlzLl9uYW1lU2VsZWN0b3IuaW5uZXJUZXh0LCBzdWJ0aXRsZTogdGhpcy5fZGF0YVNlbGVjdG9yLmlubmVyVGV4dCwgYXZhdGFyOiB0aGlzLl9hdmF0YXJTZWxlY3Rvci5zcmN9XG4gIH1cblxuc2V0QXZhdGFyKGF2YXRhcikge1xuICB0aGlzLl9hdmF0YXJTZWxlY3Rvci5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCcke2F2YXRhcn0nKWA7XG59XG5cbnNldFVzZXJJbmZvKHRpdGxlLCBzdWJ0aXRsZSkge1xuICB0aGlzLl9uYW1lU2VsZWN0b3IuaW5uZXJUZXh0ID0gdGl0bGU7XG4gIHRoaXMuX2RhdGFTZWxlY3Rvci5pbm5lclRleHQgPSBzdWJ0aXRsZTtcbn1cblxufVxuIiwiXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBiYXNlVXJsID0gJyc7XG4gIGhlYWRlcnMgPSBudWxsO1xuICB0b2tlbiA9ICcxNmQ1ZDM5OS1mMjg3LTRlYTUtYjI0Yi05ZmVhZThlYTZhMWEnO1xuXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgIHRoaXMuYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcbiAgIHRoaXMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycztcbiAgIHRoaXMuaGVhZGVycy5hdXRob3JpemF0aW9uID0gdGhpcy50b2tlbjtcbiAgfVxuXG4gIF9nZXRSZXN1bHQocmVzKSB7XG4gICAgaWYocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICBsZXQgdXJsID0gJy9jYXJkcyc7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuYmFzZVVybCArIHVybCwge2hlYWRlcnM6IHRoaXMuaGVhZGVyc30pXG4gICAgLnRoZW4odGhpcy5fZ2V0UmVzdWx0KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIGxldCB1cmwgPSAnL3VzZXJzL21lJztcbiAgICByZXR1cm4gZmV0Y2godGhpcy5iYXNlVXJsICsgdXJsLCB7aGVhZGVyczogdGhpcy5oZWFkZXJzfSlcbiAgICAudGhlbih0aGlzLl9nZXRSZXN1bHQpO1xuICB9XG5cbiAgc2V0VXNlckluZm8obmFtZSwgYWJvdXQpIHtcbiAgICBsZXQgdXJsID0gJy91c2Vycy9tZSc7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuYmFzZVVybCArIHVybCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBhYm91dFxuICAgICAgfSl9KVxuICAgICAgLnRoZW4odGhpcy5fZ2V0UmVzdWx0KTtcbiAgfVxuXG4gIHBvc3RDYXJkKG5hbWUsIGxpbmspICB7XG4gICAgbGV0IHVybCA9ICcvY2FyZHMnO1xuICAgIHJldHVybiBmZXRjaCh0aGlzLmJhc2VVcmwgKyB1cmwsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBsaW5rXG4gICAgICB9KX0pXG4gICAgLnRoZW4odGhpcy5fZ2V0UmVzdWx0KTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgbGV0IHVybCA9IGAvY2FyZHMvJHtjYXJkSWR9YDtcbiAgICByZXR1cm4gZmV0Y2godGhpcy5iYXNlVXJsICsgdXJsLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgfSlcbiAgICAudGhlbih0aGlzLl9nZXRSZXN1bHQpO1xuICB9XG4gIFxuICBsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICBsZXQgdXJsID0gYC9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgO1xuICAgIHJldHVybiBmZXRjaCh0aGlzLmJhc2VVcmwgKyB1cmwsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICB9KVxuICAgIC50aGVuKHRoaXMuX2dldFJlc3VsdCk7XG4gIH1cblxuICBVbmxpa2VDYXJkKGNhcmRJZCkge1xuICAgIGxldCB1cmwgPSBgL2NhcmRzLyR7Y2FyZElkfS9saWtlc2A7XG4gICAgcmV0dXJuIGZldGNoKHRoaXMuYmFzZVVybCArIHVybCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIH0pXG4gICAgLnRoZW4odGhpcy5fZ2V0UmVzdWx0KTtcbiAgfVxuXG4gIHNldEF2YXRhcihhdmF0YXIpIHtcbiAgICBsZXQgdXJsID0gJy91c2Vycy9tZS9hdmF0YXInO1xuICAgIHJldHVybiBmZXRjaCh0aGlzLmJhc2VVcmwgKyB1cmwsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyXG4gICAgICB9KX0pXG4gICAgLnRoZW4odGhpcy5fZ2V0UmVzdWx0KTtcbiAgfVxufSBcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIlxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoU3VibWl0IGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5cbmNvbnN0IGJ1dHRvbkVkaXRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ0bicpO1xuY29uc3QgYnV0dG9uQWRkRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnRuJyk7XG5jb25zdCBuYW1lUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX190aXRsZScpO1xuY29uc3Qgam9iUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19zdWJ0aXRsZScpO1xuY29uc3QgYXZhdGFyUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe25hbWVTZWxlY3RvcjogbmFtZVByb2ZpbGUsIGRhdGFTZWxlY3Rvcjogam9iUHJvZmlsZSwgYXZhdGFyU2VsZWN0b3I6YXZhdGFyUHJvZmlsZX0pO1xuY29uc3QgcG9wdXBXaXRoU3VibWl0ID0gbmV3IFBvcHVwV2l0aFN1Ym1pdCgnLnBvcHVwX2NvbmZpcm0tcmVtb3ZhbCcsIG51bGwpO1xuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQzJyxcbiAgaGVhZGVyczoge1xuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufSk7XG5sZXQgbXlJZCA9ICcnO1xuXG5sZXQgY2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oe2l0ZW1zOiBbXSwgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gIGNhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZU5ld0NhcmQoaXRlbSkpO1xufX0pO1xuXG5hcGkuZ2V0VXNlckluZm8oKS50aGVuKGRhdGEgPT4ge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuYWJvdXQpO1xuICB1c2VySW5mby5zZXRBdmF0YXIoZGF0YS5hdmF0YXIpO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faWQnKS5pbm5lclRleHQgPSBkYXRhLl9pZDtcbiAgbXlJZCA9IGRhdGEuX2lkO1xuICBhcGkuZ2V0SW5pdGlhbENhcmRzKCkudGhlbihjYXJkcyA9PiAge1xuICAgIGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgICAgIGl0ZW1zOiBjYXJkcywgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgIGNhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZU5ld0NhcmQoaXRlbSkpO1xuICAgIH1cbiAgICB9LCAnLmVsZW1lbnRzLWxpc3QnKTtcbiAgICBjYXJkc0xpc3QucmVuZGVySXRlbXMoKVxuICB9KTtcbn0pXG4uY2F0Y2goKGVycikgPT4ge1xuICBjb25zb2xlLmxvZyhlcnIpO1xuIH0pXG5cblxuY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcbiAgZm9ybUlucHV0OiAnLnBvcHVwX190ZXh0JyxcbiAgYnV0dG9uRWxlbWVudDogJy5wb3B1cF9fc2F2ZS1idG4nLFxuICBzYXZlQnRuSW5hY3RpdmU6J3BvcHVwX19zYXZlLWJ0bl9pbmFjdGl2ZScsXG4gIHRleHRUeXBlRXJyb3I6ICdwb3B1cF9fdGV4dF90eXBlX2Vycm9yJyxcbiAgaW5wdXRFcnJvckFjdGl2ZTogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnIFxufTtcblxubGV0IHByb2ZpbGVWYWxpZGF0aW9uID0gbnVsbDtcbmxldCBuZXdDYXJkVmFsaWRhdGlvbiA9IG51bGw7XG5cbmNvbnN0IGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvciA9IChjb25maWcpID0+IHtcbiAgcHJvZmlsZVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9lZGl0JykucXVlcnlTZWxlY3RvcignLnBvcHVwX19jb250YWluZXInKSk7XG4gIHByb2ZpbGVWYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcbn1cblxuZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcpO1xuXG5jb25zdCBhZGRDYXJkRm9ybVZhbGlkYXRvciA9IChjb25maWcpID0+IHtcbiAgbmV3Q2FyZFZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9hZGQtbmV3Y2FyZCcpLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY29udGFpbmVyJykpO1xuICBuZXdDYXJkVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XG59XG5cbmFkZENhcmRGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcpO1xuXG5jb25zdCBwb3B1cEVkaXRQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF9lZGl0JywgZnVuY3Rpb24oaW5wdXRzKSB7XG4gIHBvcHVwRWRpdFByb2ZpbGUubG9hZGVyU3RhcnQoKTtcbiAgYXBpLnNldFVzZXJJbmZvKGlucHV0c1sndGV4dC1pbnB1dCddLCBpbnB1dHNbJ2pvYi1pbnB1dCddKVxuICAudGhlbihkYXRhID0+IHtcbiAgICBwb3B1cEVkaXRQcm9maWxlLmxvYWRlclN0b3AoKTtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhLm5hbWUsIGRhdGEuYWJvdXQpO1xuICAgIHBvcHVwRWRpdFByb2ZpbGUuY2xvc2UoKVxuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycik7XG4gICB9KVxufSk7XG5cbmNvbnN0IHBvcHVwVXBkYXRlQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF91cGRhdGUtYXZhdGFyJywgZnVuY3Rpb24oYXZhdGFyKSB7XG4gIHBvcHVwVXBkYXRlQXZhdGFyLmxvYWRlclN0YXJ0KCk7XG4gIGFwaS5zZXRBdmF0YXIoYXZhdGFyWydsaW5rLWlucCddKS50aGVuIChkYXRhID0+IHtcbiAgICBwb3B1cFVwZGF0ZUF2YXRhci5sb2FkZXJTdG9wKCk7XG4gICAgcG9wdXBVcGRhdGVBdmF0YXIuY2xvc2UoKTtcbiAgICBhdmF0YXJQcm9maWxlLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJyR7ZGF0YS5hdmF0YXJ9JylgO1xuXG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgIH0pXG59KVxuXG5jb25zdCBwb3B1cEFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX2FkZC1uZXdjYXJkJywgZnVuY3Rpb24gKGlucHV0cykge1xuICBsZXQgY2FyZCA9IGFwaS5wb3N0Q2FyZChpbnB1dHNbJ3BsYWNlLWlucHV0J10sIGlucHV0c1snbGluay1pbnB1dCddKS50aGVuKGRhdGEgPT4ge1xuICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgIGNhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZU5ld0NhcmQoZGF0YSkpXG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5sb2coZXJyKTtcbiAgIH0pXG4gIHBvcHVwQWRkQ2FyZC5jbG9zZSgpO1xuICBuZXdDYXJkVmFsaWRhdGlvbi50b2dnbGVCdXR0b25TdGF0ZVJlb3BlbigpO1xufSk7XG5cbmNvbnN0IHBvcHVwSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF9pbWFnZScpO1xuXG5jb25zdCBjcmVhdGVOZXdDYXJkID0gKGl0ZW0pID0+IHtcbiAgbGV0IG15Q2FyZCA9IHRydWU7XG4gIGlmIChpdGVtLm93bmVyKSB7XG4gICAgbXlDYXJkID0gaXRlbS5vd25lci5faWQgPT09IG15SWQ7XG4gIH1cbiAgbGV0IG15TGlrZSA9IGZhbHNlO1xuICBpZiAoaXRlbS5saWtlcy5maWx0ZXIoKGxpa2UpID0+IGxpa2UuX2lkID09IG15SWQpLmxlbmd0aCA+IDApIHtcbiAgICBteUxpa2UgPSB0cnVlO1xuICB9XG5cbiAgbGV0IGhhbmRsZUNhcmRSZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgICBwb3B1cFdpdGhTdWJtaXQub3BlbigpO1xuICAgIHBvcHVwV2l0aFN1Ym1pdC5zZXRTdWJtaXRGdW5jdGlvbigoKSA9PiB7XG4gICAgICBhcGkuZGVsZXRlQ2FyZChpdGVtLl9pZClcbiAgICAgIC50aGVuKGRhdGEgPT4ge3RoaXMucmVtb3ZlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKVxuICAgICAgfSlcbiAgICB9KTtcbiAgfTtcblxuICBsZXQgaGFuZGxlQ2FyZExpa2UgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5oYXZlTXlMaWtlKCkpIHtcbiAgICAgIGFwaS5Vbmxpa2VDYXJkKHRoaXMuaWQpLnRoZW4oIHJlcyA9PiB7XG4gICAgICAgIHRoaXMudW5zZXRMaWtlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICB9KVxuICAgIH0gIFxuICAgICBlbHNlIHtcbiAgICAgIGFwaS5saWtlQ2FyZCh0aGlzLmlkKS50aGVuKCByZXMgPT4ge1xuICAgICAgICB0aGlzLnNldExpa2UocmVzLmxpa2VzKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgIH0pXG4gICAgfVxuICB9O1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoaXRlbSwnLnRlbXBsYXRlJywgcG9wdXBJbWFnZS5vcGVuLmJpbmQocG9wdXBJbWFnZSksIGhhbmRsZUNhcmRSZW1vdmUsIGhhbmRsZUNhcmRMaWtlLCBteUNhcmQsIG15TGlrZSk7XG4gIGNvbnN0IG5ld0NhcmQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICByZXR1cm4gbmV3Q2FyZDtcbn1cblxuYnV0dG9uRWRpdFBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gIGNvbnN0IHt0aXRsZSwgc3VidGl0bGV9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcG9wdXBFZGl0UHJvZmlsZS5zZXREZWZhdWx0VmFsdWVzKHsndGV4dC1pbnB1dCc6IHRpdGxlLCAnam9iLWlucHV0Jzogc3VidGl0bGV9KVxuICBwb3B1cEVkaXRQcm9maWxlLm9wZW4oKVxufSk7XG5cbmJ1dHRvbkFkZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgcG9wdXBBZGRDYXJkLm9wZW4oKVxufSk7XG5cbmF2YXRhclByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgcG9wdXBVcGRhdGVBdmF0YXIub3BlbigpXG59KTtcblxucG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBBZGRDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cFVwZGF0ZUF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNhcmQiLCJzZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUNhcmRSZW1vdmUiLCJoYW5kbGVDYXJkTGlrZSIsIm15Q2FyZCIsIm15TGlrZSIsIl9jYXJkTGlrZWJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUVsZW1lbnQiLCJfaGFuZGxlQ2FyZExpa2UiLCJiaW5kIiwiX2NhcmRSZW1vdmVidXR0b24iLCJfaGFuZGxlUmVtb3ZlRWxlbWVudCIsIl9lbGVtZW50SW1hZ2UiLCJfaGFuZGxlQ2FyZENsaWNrIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2hhbmRsZUNhcmRSZW1vdmUiLCJ0aGlzIiwiX3RpdGxlIiwibmFtZSIsIl9pbWFnZSIsImxpbmsiLCJfc2VsZWN0b3IiLCJfb3duZXJJZCIsIm93bmVyIiwiX2lkIiwiX215Q2FyZCIsImlkIiwiX2xpa2VzIiwibGlrZXMiLCJfbXlsaWtlIiwiYWRkIiwiX2xpa2VzRWxlbWVudCIsImlubmVyVGV4dCIsImxlbmd0aCIsInJlbW92ZSIsInBhcnNlSW50IiwiX2l0ZW1FbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJTZWN0aW9uIiwiaXRlbXMiLCJyZW5kZXJlciIsImVsZW1lbnQiLCJwcmVwZW5kIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiZm9yRWFjaCIsIml0ZW0iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiX2hhbmRsZUVzY0Nsb3NlIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJfcG9wdXBDbG9zZUJ1dHRvbiIsIl9wb3B1cENsb3NlT3ZlcmxheSIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJfaW1hZ2VCaWciLCJfaW1hZ2VOYW1lIiwiZXZlbnQiLCJQb3B1cFdpdGhTdWJtaXQiLCJoYW5kbGVyU3VibWl0RXZlbnQiLCJfZm9ybSIsIl9oYW5kbGVyU3VibWl0RXZlbnQiLCJzZXRFdmVudExpc3RlbmVycyIsImYiLCJfb25TdWJtaXQiLCJwcmV2ZW50RGVmYXVsdCIsImNhbGwiLCJyZXNldCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9mb3JtSW5wdXQiLCJmb3JtSW5wdXQiLCJfYnV0dG9uRWxlbWVudCIsImJ1dHRvbkVsZW1lbnQiLCJfc2F2ZUJ0bkluYWN0aXZlIiwic2F2ZUJ0bkluYWN0aXZlIiwiX3RleHRUeXBlRXJyb3IiLCJ0ZXh0VHlwZUVycm9yIiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0TGlzdCIsIl9lbGVtZW50U3VibWl0IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiY29uc29sZSIsImxvZyIsInNvbWUiLCJzZXRBdHRyaWJ1dGUiLCJfaGFzSW52YWxpZElucHV0IiwidG9nZ2xlQnV0dG9uU3RhdGVSZW9wZW4iLCJyZW1vdmVBdHRyaWJ1dGUiLCJ0aGF0IiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfZ2V0SW5wdXRFbGVtZW50cyIsIl9hZGRTdWJtaXRMaXN0ZW5lciIsIlBvcHVwV2l0aEZvcm0iLCJfc3VibWl0QnV0dG9uIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRzIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwidmFsdWVzIiwiaW5wdXRfaWQiLCJPYmplY3QiLCJrZXlzIiwiaW5jbHVkZXMiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImRhdGFTZWxlY3RvciIsImF2YXRhclNlbGVjdG9yIiwiX25hbWVTZWxlY3RvciIsIl9kYXRhU2VsZWN0b3IiLCJfYXZhdGFyU2VsZWN0b3IiLCJ0aXRsZSIsInN1YnRpdGxlIiwiYXZhdGFyIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJBcGkiLCJvcHRpb25zIiwiYmFzZVVybCIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidG9rZW4iLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJ0aGVuIiwiX2dldFJlc3VsdCIsImFib3V0IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJ1cmwiLCJidXR0b25FZGl0UG9wdXAiLCJidXR0b25BZGRFbGVtZW50IiwibmFtZVByb2ZpbGUiLCJqb2JQcm9maWxlIiwiYXZhdGFyUHJvZmlsZSIsInVzZXJJbmZvIiwicG9wdXBXaXRoU3VibWl0IiwiYXBpIiwibXlJZCIsImNhcmRzTGlzdCIsImFkZEl0ZW0iLCJjcmVhdGVOZXdDYXJkIiwiZ2V0VXNlckluZm8iLCJkYXRhIiwic2V0VXNlckluZm8iLCJzZXRBdmF0YXIiLCJnZXRJbml0aWFsQ2FyZHMiLCJjYXJkcyIsInJlbmRlckl0ZW1zIiwiY2F0Y2giLCJlcnIiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiaW5wdXRFcnJvckFjdGl2ZSIsIm5ld0NhcmRWYWxpZGF0aW9uIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBvcHVwRWRpdFByb2ZpbGUiLCJsb2FkZXJTdGFydCIsImxvYWRlclN0b3AiLCJwb3B1cFVwZGF0ZUF2YXRhciIsInBvcHVwQWRkQ2FyZCIsInBvc3RDYXJkIiwicG9wdXBJbWFnZSIsImZpbHRlciIsImxpa2UiLCJvcGVuIiwic2V0U3VibWl0RnVuY3Rpb24iLCJkZWxldGVDYXJkIiwiaGF2ZU15TGlrZSIsIlVubGlrZUNhcmQiLCJ1bnNldExpa2UiLCJsaWtlQ2FyZCIsInNldExpa2UiLCJnZW5lcmF0ZUNhcmQiLCJzZXREZWZhdWx0VmFsdWVzIl0sInNvdXJjZVJvb3QiOiIifQ==